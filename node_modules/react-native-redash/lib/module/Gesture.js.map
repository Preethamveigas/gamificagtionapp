{"version":3,"sources":["Gesture.ts"],"names":["Animated","State","GestureState","runDecay","runSpring","Clock","Value","add","block","cond","divide","eq","greaterThan","lessThan","multiply","set","stopClock","sub","preserveOffset","value","state","previous","offset","BEGAN","decay","velocity","decayedValue","clock","rerunDecaying","END","spring","translation","snapPoint","defaultOffset","springedValue","rerunSpring","springConfig","toValue","damping","mass","stiffness","overshootClamping","restSpeedThreshold","restDisplacementThreshold","limit","min","max","offsetValue","preserveMultiplicativeOffset"],"mappings":"AAAA,MAAOA,CAAAA,QAAP,KAAqB,yBAArB,CACA,OAASC,KAAK,GAAIC,CAAAA,YAAlB,KAAsC,8BAAtC,CAEA,OAASC,QAAT,CAAmBC,SAAnB,KAAoC,oBAApC,C,GAGEC,CAAAA,K,CAaEL,Q,CAbFK,K,CACAC,K,CAYEN,Q,CAZFM,K,CACAC,G,CAWEP,Q,CAXFO,G,CACAC,K,CAUER,Q,CAVFQ,K,CACAC,I,CASET,Q,CATFS,I,CACAC,M,CAQEV,Q,CARFU,M,CACAC,E,CAOEX,Q,CAPFW,E,CACAC,W,CAMEZ,Q,CANFY,W,CACAC,Q,CAKEb,Q,CALFa,Q,CACAC,Q,CAIEd,Q,CAJFc,Q,CACAC,G,CAGEf,Q,CAHFe,G,CACAC,S,CAEEhB,Q,CAFFgB,S,CACAC,G,CACEjB,Q,CADFiB,G,CAIF,MAAO,IAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAC5BC,KAD4B,CAE5BC,KAF4B,CAGzB,CACH,GAAMC,CAAAA,QAAQ,CAAG,GAAIf,CAAAA,KAAJ,CAAU,CAAV,CAAjB,CACA,GAAMgB,CAAAA,MAAM,CAAG,GAAIhB,CAAAA,KAAJ,CAAU,CAAV,CAAf,CAEA,MAAOE,CAAAA,KAAK,CAAC,CACXC,IAAI,CACFE,EAAE,CAACS,KAAD,CAAQlB,YAAY,CAACqB,KAArB,CADA,CAEF,CAACR,GAAG,CAACM,QAAD,CAAW,CAAX,CAAJ,CAFE,CAGF,CAACN,GAAG,CAACO,MAAD,CAASf,GAAG,CAACe,MAAD,CAASL,GAAG,CAACE,KAAD,CAAQE,QAAR,CAAZ,CAAZ,CAAJ,CAAiDN,GAAG,CAACM,QAAD,CAAWF,KAAX,CAApD,CAHE,CADO,CAMXG,MANW,CAAD,CAAZ,CAQD,CAfM,CAiBP,MAAO,IAAME,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,CACnBL,KADmB,CAEnBC,KAFmB,CAGnBK,QAHmB,CAIhB,CACH,GAAMC,CAAAA,YAAY,CAAG,GAAIpB,CAAAA,KAAJ,CAAU,CAAV,CAArB,CACA,GAAMgB,CAAAA,MAAM,CAAG,GAAIhB,CAAAA,KAAJ,CAAU,CAAV,CAAf,CACA,GAAMqB,CAAAA,KAAK,CAAG,GAAItB,CAAAA,KAAJ,EAAd,CACA,GAAMuB,CAAAA,aAAa,CAAG,GAAItB,CAAAA,KAAJ,CAAU,CAAV,CAAtB,CAEA,MAAOE,CAAAA,KAAK,CAAC,CACXC,IAAI,CACFE,EAAE,CAACS,KAAD,CAAQlB,YAAY,CAAC2B,GAArB,CADA,CAEF,CACEd,GAAG,CACDW,YADC,CAEDvB,QAAQ,CAACwB,KAAD,CAAQpB,GAAG,CAACY,KAAD,CAAQG,MAAR,CAAX,CAA4BG,QAA5B,CAAsCG,aAAtC,CAFP,CADL,CAFE,CAQF,CACEZ,SAAS,CAACW,KAAD,CADX,CAEElB,IAAI,CAACE,EAAE,CAACS,KAAD,CAAQlB,YAAY,CAACqB,KAArB,CAAH,CAAgC,CAClCR,GAAG,CAACa,aAAD,CAAgB,CAAhB,CAD+B,CAElCb,GAAG,CAACO,MAAD,CAASL,GAAG,CAACS,YAAD,CAAeP,KAAf,CAAZ,CAF+B,CAAhC,CAFN,CAMEJ,GAAG,CAACW,YAAD,CAAenB,GAAG,CAACY,KAAD,CAAQG,MAAR,CAAlB,CANL,CARE,CADO,CAkBXI,YAlBW,CAAD,CAAZ,CAoBD,CA9BM,CAgCP,MAAO,IAAMI,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CACpBC,WADoB,CAEpBX,KAFoB,CAGpBY,SAHoB,CAKjB,IADHC,CAAAA,aACG,2DADqB,CACrB,CACH,GAAMC,CAAAA,aAAa,CAAG,GAAI5B,CAAAA,KAAJ,CAAU,CAAV,CAAtB,CACA,GAAMgB,CAAAA,MAAM,CAAG,GAAIhB,CAAAA,KAAJ,CAAU2B,aAAV,CAAf,CACA,GAAMN,CAAAA,KAAK,CAAG,GAAItB,CAAAA,KAAJ,EAAd,CACA,GAAM8B,CAAAA,WAAW,CAAG,GAAI7B,CAAAA,KAAJ,CAAU,CAAV,CAApB,CAEA,GAAM8B,CAAAA,YAAY,CAAG,CACnBC,OAAO,CAAE,GAAI/B,CAAAA,KAAJ,CAAU,CAAV,CADU,CAEnBgC,OAAO,CAAE,EAFU,CAGnBC,IAAI,CAAE,CAHa,CAInBC,SAAS,CAAE,GAJQ,CAKnBC,iBAAiB,CAAE,KALA,CAMnBC,kBAAkB,CAAE,KAND,CAOnBC,yBAAyB,CAAE,KAPR,CAArB,CASA,MAAOnC,CAAAA,KAAK,CAAC,CACXC,IAAI,CACFE,EAAE,CAACS,KAAD,CAAQlB,YAAY,CAAC2B,GAArB,CADA,CAEF,CAACd,GAAG,CAACmB,aAAD,CAAgB9B,SAAS,CAACuB,KAAD,CAAQpB,GAAG,CAACwB,WAAD,CAAcT,MAAd,CAAX,CAAkCU,SAAlC,CAA6CI,YAA7C,CAAzB,CAAJ,CAFE,CAGF,CACEpB,SAAS,CAACW,KAAD,CADX,CAEElB,IAAI,CAACE,EAAE,CAACS,KAAD,CAAQlB,YAAY,CAACqB,KAArB,CAAH,CAAgC,CAACR,GAAG,CAACoB,WAAD,CAAc,CAAd,CAAJ,CAAsBpB,GAAG,CAACO,MAAD,CAASL,GAAG,CAACiB,aAAD,CAAgBH,WAAhB,CAAZ,CAAzB,CAAhC,CAFN,CAGEhB,GAAG,CAACmB,aAAD,CAAgB3B,GAAG,CAACwB,WAAD,CAAcT,MAAd,CAAnB,CAHL,CAHE,CADO,CAUXY,aAVW,CAAD,CAAZ,CAYD,CAhCM,CAkCP,MAAO,IAAMU,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,CACnBzB,KADmB,CAEnBC,KAFmB,CAGnByB,GAHmB,CAInBC,GAJmB,CAKhB,CACH,GAAMxB,CAAAA,MAAM,CAAG,GAAItB,CAAAA,QAAQ,CAACM,KAAb,CAAmB,CAAnB,CAAf,CACA,GAAMyC,CAAAA,WAAW,CAAGxC,GAAG,CAACe,MAAD,CAASH,KAAT,CAAvB,CAEA,MAAOX,CAAAA,KAAK,CAAC,CACXC,IAAI,CAACE,EAAE,CAACS,KAAD,CAAQlB,YAAY,CAACqB,KAArB,CAAH,CAAgC,CAClCd,IAAI,CAACI,QAAQ,CAACkC,WAAD,CAAcF,GAAd,CAAT,CAA6B9B,GAAG,CAACO,MAAD,CAASL,GAAG,CAAC4B,GAAD,CAAM1B,KAAN,CAAZ,CAAhC,CAD8B,CAElCV,IAAI,CAACG,WAAW,CAACmC,WAAD,CAAcD,GAAd,CAAZ,CAAgC/B,GAAG,CAACO,MAAD,CAASL,GAAG,CAAC6B,GAAD,CAAM3B,KAAN,CAAZ,CAAnC,CAF8B,CAAhC,CADO,CAKXV,IAAI,CACFI,QAAQ,CAACkC,WAAD,CAAcF,GAAd,CADN,CAEFA,GAFE,CAGFpC,IAAI,CAACG,WAAW,CAACmC,WAAD,CAAcD,GAAd,CAAZ,CAAgCA,GAAhC,CAAqCC,WAArC,CAHF,CALO,CAAD,CAAZ,CAWD,CApBM,CAsBP,MAAO,IAAMC,CAAAA,4BAA4B,CAAG,QAA/BA,CAAAA,4BAA+B,CAC1C7B,KAD0C,CAE1CC,KAF0C,CAGvC,CACH,GAAMC,CAAAA,QAAQ,CAAG,GAAIrB,CAAAA,QAAQ,CAACM,KAAb,CAAmB,CAAnB,CAAjB,CACA,GAAMgB,CAAAA,MAAM,CAAG,GAAItB,CAAAA,QAAQ,CAACM,KAAb,CAAmB,CAAnB,CAAf,CAEA,MAAOE,CAAAA,KAAK,CAAC,CACXC,IAAI,CACFE,EAAE,CAACS,KAAD,CAAQlB,YAAY,CAACqB,KAArB,CADA,CAEF,CAACR,GAAG,CAACM,QAAD,CAAW,CAAX,CAAJ,CAFE,CAGF,CACEN,GAAG,CAACO,MAAD,CAASR,QAAQ,CAACQ,MAAD,CAASZ,MAAM,CAACS,KAAD,CAAQE,QAAR,CAAf,CAAjB,CADL,CAEEN,GAAG,CAACM,QAAD,CAAWF,KAAX,CAFL,CAHE,CADO,CASXG,MATW,CAAD,CAAZ,CAWD,CAlBM","sourcesContent":["import Animated from \"react-native-reanimated\";\nimport { State as GestureState } from \"react-native-gesture-handler\";\n\nimport { runDecay, runSpring } from \"./AnimationRunners\";\n\nconst {\n  Clock,\n  Value,\n  add,\n  block,\n  cond,\n  divide,\n  eq,\n  greaterThan,\n  lessThan,\n  multiply,\n  set,\n  stopClock,\n  sub,\n} = Animated;\n\n\nexport const preserveOffset = (\n  value: Animated.Adaptable<number>,\n  state: Animated.Adaptable<GestureState>,\n) => {\n  const previous = new Value(0);\n  const offset = new Value(0);\n\n  return block([\n    cond(\n      eq(state, GestureState.BEGAN),\n      [set(previous, 0)],\n      [set(offset, add(offset, sub(value, previous))), set(previous, value)],\n    ),\n    offset,\n  ]);\n};\n\nexport const decay = (\n  value: Animated.Adaptable<number>,\n  state: Animated.Adaptable<GestureState>,\n  velocity: Animated.Adaptable<number>,\n) => {\n  const decayedValue = new Value(0);\n  const offset = new Value(0);\n  const clock = new Clock();\n  const rerunDecaying = new Value(0);\n\n  return block([\n    cond(\n      eq(state, GestureState.END),\n      [\n        set(\n          decayedValue,\n          runDecay(clock, add(value, offset), velocity, rerunDecaying),\n        ),\n      ],\n      [\n        stopClock(clock),\n        cond(eq(state, GestureState.BEGAN), [\n          set(rerunDecaying, 0),\n          set(offset, sub(decayedValue, value)),\n        ]),\n        set(decayedValue, add(value, offset)),\n      ],\n    ),\n    decayedValue,\n  ]);\n};\n\nexport const spring = (\n  translation: Animated.Value<number>,\n  state: Animated.Value<GestureState>,\n  snapPoint: number,\n  defaultOffset: number = 0,\n) => {\n  const springedValue = new Value(0);\n  const offset = new Value(defaultOffset);\n  const clock = new Clock();\n  const rerunSpring = new Value(0);\n  // http://chenglou.github.io/react-motion/demos/demo5-spring-parameters-chooser/\n  const springConfig = {\n    toValue: new Value(0),\n    damping: 15,\n    mass: 1,\n    stiffness: 150,\n    overshootClamping: false,\n    restSpeedThreshold: 0.001,\n    restDisplacementThreshold: 0.001,\n  };\n  return block([\n    cond(\n      eq(state, GestureState.END),\n      [set(springedValue, runSpring(clock, add(translation, offset), snapPoint, springConfig))],\n      [\n        stopClock(clock),\n        cond(eq(state, GestureState.BEGAN), [set(rerunSpring, 0), set(offset, sub(springedValue, translation))]),\n        set(springedValue, add(translation, offset)),\n      ],\n    ),\n    springedValue,\n  ]);\n};\n\nexport const limit = (\n  value: Animated.Adaptable<number>,\n  state: Animated.Adaptable<GestureState>,\n  min: number,\n  max: number,\n) => {\n  const offset = new Animated.Value(0);\n  const offsetValue = add(offset, value);\n\n  return block([\n    cond(eq(state, GestureState.BEGAN), [\n      cond(lessThan(offsetValue, min), set(offset, sub(min, value))),\n      cond(greaterThan(offsetValue, max), set(offset, sub(max, value))),\n    ]),\n    cond(\n      lessThan(offsetValue, min),\n      min,\n      cond(greaterThan(offsetValue, max), max, offsetValue),\n    ),\n  ]);\n};\n\nexport const preserveMultiplicativeOffset = (\n  value: Animated.Adaptable<number>,\n  state: Animated.Adaptable<number>,\n) => {\n  const previous = new Animated.Value(1);\n  const offset = new Animated.Value(1);\n\n  return block([\n    cond(\n      eq(state, GestureState.BEGAN),\n      [set(previous, 1)],\n      [\n        set(offset, multiply(offset, divide(value, previous))),\n        set(previous, value),\n      ],\n    ),\n    offset,\n  ]);\n};\n"]}